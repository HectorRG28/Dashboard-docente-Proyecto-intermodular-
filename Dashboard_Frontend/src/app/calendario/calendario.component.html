<div class="dashboard-container">

  <!-- CABECERA PRINCIPAL -->
  <header class="top-bar">
    
    <div class="logo-section">
      <div class="logo-box">
        <div class="cross-line l1"></div>
        <div class="cross-line l2"></div>
      </div>
    </div>

    <!-- ZONA CENTRAL DE NAVEGACIÃ“N -->
    <div class="nav-controls">
      
      <!-- FECHA -->
      <div class="control-item">
        <span class="label">
          {{ nombresMeses[mesActualVisual.getMonth()] }} {{ mesActualVisual.getFullYear() }}
        </span>
        <span class="icon">ğŸ“…</span>
      </div>

      <!-- Boton crear tarea -->
      <div class="control-item">
        <button (click)="irACrearTarea()" 
                style="background-color: black; color: white; padding: 5px 15px; font-weight: bold; border: none; border-radius: 4px; cursor: pointer; display: flex; align-items: center; gap: 5px;">
          <span>+</span> Nueva Tarea
        </button>
      </div>
      <!--  FIN DEL BOTÃ“N -->

      <div class="control-item">
        <span class="icon">ğŸ”</span>
      </div>

      <!-- POPUP DE AJUSTES -->
      <div class="control-item relative-parent">
        <span class="icon clickable" (click)="toggleAjustes()">âš™ï¸</span>
        
        <div class="ajustes-popup" *ngIf="mostrarAjustes">
           <div (click)="$event.stopPropagation()">
             <div style="padding: 15px; width: 200px; text-align: center;">
                <p>MenÃº de configuraciÃ³n</p>
                <button (click)="toggleAjustes()">Cerrar</button>
             </div>
           </div>
        </div>
      </div>
    </div>

    <!-- ACCIONES DERECHA -->
    <div class="right-actions">
      <div class="pill-toggle">
        <button class="pill-btn active">âœ“ Tareas</button>
        <button class="pill-btn">â“§ Completado</button>
      </div>
      <div class="control-item" title="Classroom"><span class="icon">ğŸ«</span></div>
      <div class="cabecera-calendario">
    <div class="contenedor-reloj-pequeno">
      <app-reloj-analogico></app-reloj-analogico>
  </div>
</div>

<div class="grid-calendario">
   ...
</div>
    </div>
  </header>

  <!-- CUERPO PRINCIPAL -->
  <div class="main-body">
    
    <!-- BARRA LATERAL -->
    <aside class="sidebar">
      
      <div class="mini-calendar-container">
        <div class="mini-header">
          <span>{{ nombresMeses[mesActualVisual.getMonth()] }} {{ mesActualVisual.getFullYear() }}</span>
          <div class="mini-nav">
            <button (click)="cambiarMes(-1)">&lt;</button>
            <button (click)="cambiarMes(1)">&gt;</button>
          </div>
        </div>

        <div class="mini-week-header">
          <span>L</span><span>M</span><span>X</span><span>J</span><span>V</span><span>S</span><span>D</span>
        </div>

        <div class="mini-days-grid">
          <ng-container *ngFor="let dia of diasMiniCalendario">
            <span *ngIf="!dia.esHueco" 
                  [class.active-day]="dia.esHoy" 
                  (click)="seleccionarDia(dia.numero)">
              {{ dia.numero }}
            </span>
            <span *ngIf="dia.esHueco" class="empty"></span>
          </ng-container>
        </div>
      </div>

      <div class="sidebar-box search-box">
        <label>ReuniÃ³n con:</label>
        <div class="input-fake">
          <input type="text" placeholder="Buscar persona...">
          <span class="icon">ğŸ”</span>
        </div>
      </div>

      <div class="sidebar-box search-box">
        <label>Cursos / Asignaturas:</label>
        <div class="input-fake">
          <span class="icon" style="margin-right:5px">â˜°</span>
          <input type="text" placeholder="Filtrar asignatura...">
          <span class="icon">ğŸ”</span>
        </div>
      </div>
    </aside>

    <!-- CALENDARIO GRANDE -->
    <main class="calendar-grid">
      
      <div class="day-header" *ngFor="let dia of diasSemana">{{ dia }}</div>

      <div class="cal-cell" *ngFor="let celda of celdasCalendario">
        
        <span class="day-num" *ngIf="!celda.esHueco">{{ celda.numero }}</span>

        <div class="eventos-container" *ngIf="!celda.esHueco">
          
          <div class="evento-chip" 
               *ngFor="let evento of celda.eventos"
               [title]="evento.titulo + ': ' + evento.descripcion"
               style="display: flex; justify-content: space-between; align-items: center; padding-right: 5px;">
            
            <!-- Datos del evento -->
            <div style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
               <span class="evento-hora">{{ evento.fecha_inicio | date:'HH:mm' }}</span>
               <span class="evento-titulo">{{ evento.titulo }}</span>
            </div>

            <!-- BOTÃ“N BORRAR (X ROJA) -->
            <span (click)="borrarTarea(evento.id_actividad, $event)" 
                  style="color: red; font-weight: bold; cursor: pointer; margin-left: 5px; font-size: 12px;"
                  title="Eliminar tarea">
              âœ–
            </span>
          
          </div>

        </div>

      </div>
    </main>
  </div>
</div>